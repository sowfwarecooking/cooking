


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Order</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">productionCode</a>
</div>

<h1>Coverage Summary for Class: Order (productionCode)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Order</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (12/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    70.7%
  </span>
  <span class="absValue">
    (29/41)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    86.8%
  </span>
  <span class="absValue">
    (66/76)
  </span>
</td>
</tr>
  <tr>
    <td class="name">Order$Dietarypreference</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (13/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    70.7%
  </span>
  <span class="absValue">
    (29/41)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    87%
  </span>
  <span class="absValue">
    (67/77)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package productionCode;
&nbsp;
&nbsp;
&nbsp;import java.io.*;
&nbsp;import java.nio.file.Files;
&nbsp;import java.util.*;
&nbsp;import java.util.stream.Collectors;
&nbsp;
<b class="fc">&nbsp;public class Order {</b>
<b class="fc">&nbsp;   public ArrayList&lt;String&gt; ingredients = new ArrayList&lt;&gt;();</b>
&nbsp;
<b class="fc">&nbsp;   public enum Dietarypreference {VEGAN, LOW_CARB, VEGETARIAN, KETO, GLUTEN_FREE, NONE}</b>
&nbsp;
&nbsp;   ;
<b class="fc">&nbsp;   Dietarypreference myDP = Dietarypreference.NONE;</b>
&nbsp;
&nbsp;   public String getDietaryPreference() {
<b class="fc">&nbsp;      return (String.valueOf(this.myDP)).toLowerCase();</b>
&nbsp;   }
&nbsp;
&nbsp;   public void setIngredients(String... s) {
<b class="fc">&nbsp;      for (String a : s) {</b>
<b class="fc">&nbsp;         this.ingredients.add(a);</b>
&nbsp;      }
&nbsp;   }
&nbsp;
&nbsp;   public void setDietaryPreference(String a) {
<b class="fc">&nbsp;      String s = a.toLowerCase();</b>
<b class="pc">&nbsp;      switch (s) {</b>
&nbsp;         case &quot;vegan&quot;:
<b class="fc">&nbsp;            this.myDP = Dietarypreference.VEGAN;</b>
&nbsp;            break;
&nbsp;         case &quot;low carb&quot;:
<b class="nc">&nbsp;            this.myDP = Dietarypreference.LOW_CARB;</b>
&nbsp;            break;
&nbsp;         case &quot;vegetarian&quot;:
<b class="nc">&nbsp;            this.myDP = Dietarypreference.VEGETARIAN;</b>
&nbsp;            break;
&nbsp;         case &quot;keto&quot;:
<b class="nc">&nbsp;            this.myDP = Dietarypreference.KETO;</b>
&nbsp;            break;
&nbsp;         case &quot;gluten free&quot;:
<b class="nc">&nbsp;            this.myDP = Dietarypreference.GLUTEN_FREE;</b>
&nbsp;            break;
&nbsp;         default:
<b class="nc">&nbsp;            this.myDP = Dietarypreference.NONE;</b>
&nbsp;      }
&nbsp;   }
&nbsp;
&nbsp;   public String submitOrder() {
<b class="fc">&nbsp;      String s = &quot;&quot;;</b>
<b class="fc">&nbsp;      if (!this.ingredients.isEmpty()) {</b>
<b class="fc">&nbsp;         s = this.ingredients.get(0);</b>
<b class="fc">&nbsp;         for (int i = 1; i &lt; this.ingredients.size(); i++) {</b>
<b class="fc">&nbsp;            s += &quot;, &quot; + this.ingredients.get(i);</b>
&nbsp;         }
&nbsp;
&nbsp;
&nbsp;      } else {
<b class="fc">&nbsp;         s = selectIngredientsMessage();</b>
&nbsp;      }
<b class="fc">&nbsp;      return s;</b>
&nbsp;   }
&nbsp;
&nbsp;   public String submitOrderWithDietaryPreferences() {
<b class="fc">&nbsp;      String s = &quot;&quot;;</b>
<b class="pc">&nbsp;      if (!this.ingredients.isEmpty()) {</b>
<b class="nc">&nbsp;         s = this.getDietaryPreference();</b>
<b class="nc">&nbsp;         for (int i = 0; i &lt; this.ingredients.size(); i++) {</b>
<b class="nc">&nbsp;            s += &quot;, &quot; + this.ingredients.get(i);</b>
&nbsp;         }
&nbsp;         //JOptionPane.showMessageDialog(null,mealCreatedSuccessfullyMessage());
&nbsp;      } else {
<b class="fc">&nbsp;         s = selectIngredientsMessage();</b>
&nbsp;      }
<b class="fc">&nbsp;      return s;</b>
&nbsp;   }
&nbsp;
&nbsp;   public ArrayList&lt;String&gt; getOrderAsArray() {
&nbsp;
<b class="fc">&nbsp;      return this.ingredients;</b>
&nbsp;
&nbsp;   }
&nbsp;
&nbsp;   public String mealCreatedSuccessfullyMessage() {
<b class="fc">&nbsp;      return &quot;Meal Created Successfully&quot;;</b>
&nbsp;   }
&nbsp;
&nbsp;   public String selectIngredientsMessage() {
<b class="fc">&nbsp;      return &quot;Please select at least one ingredient&quot;;</b>
&nbsp;   }
&nbsp;
&nbsp;   public ArrayList&lt;String&gt; getIngredientsFromFile(String mealName) throws IOException {
&nbsp;
<b class="fc">&nbsp;      try (BufferedReader reader = new BufferedReader(new FileReader(&quot;data/ingreadint.txt&quot;))) {</b>
&nbsp;         String line;
<b class="pc">&nbsp;         while ((line = reader.readLine()) != null) {</b>
<b class="fc">&nbsp;            if (line.contains(mealName)) {</b>
&nbsp;               // Split the line by comma
<b class="fc">&nbsp;               String[] parts = line.split(&quot;,&quot;);</b>
&nbsp;               // Convert from index 1 to the end into a List
<b class="fc">&nbsp;               return (ArrayList&lt;String&gt;) Arrays.stream(parts, 1, parts.length)</b>
<b class="fc">&nbsp;                       .collect(Collectors.toList());</b>
&nbsp;            }
&nbsp;         }
&nbsp;      }
<b class="nc">&nbsp;      return new ArrayList&lt;&gt;();</b>
&nbsp;   }
&nbsp;   public void updateQuantities(ArrayList&lt;String&gt; ingredientsToReduce) throws IOException {
<b class="fc">&nbsp;      File file = new File(&quot;data/stock.txt&quot;);</b>
&nbsp;
&nbsp;      // Read file lines into a list
<b class="fc">&nbsp;      List&lt;String&gt; lines = Files.readAllLines(file.toPath());</b>
&nbsp;
&nbsp;      // Create a map: ingredient normalized -&gt; quantity
<b class="fc">&nbsp;      Map&lt;String, Integer&gt; ingredientQuantityMap = new LinkedHashMap&lt;&gt;();</b>
&nbsp;
&nbsp;      // Also keep original line (ingredient name) for writing back with same case
<b class="fc">&nbsp;      Map&lt;String, String&gt; originalNameMap = new HashMap&lt;&gt;();</b>
&nbsp;
<b class="fc">&nbsp;      for (String line : lines) {</b>
<b class="fc">&nbsp;         String[] parts = line.split(&quot;,&quot;);</b>
<b class="pc">&nbsp;         if (parts.length == 2) {</b>
<b class="fc">&nbsp;            String ingredientName = parts[0].trim();</b>
<b class="fc">&nbsp;            String ingredientKey = ingredientName.toLowerCase();</b>
<b class="fc">&nbsp;            int quantity = Integer.parseInt(parts[1].trim());</b>
<b class="fc">&nbsp;            ingredientQuantityMap.put(ingredientKey, quantity);</b>
<b class="fc">&nbsp;            originalNameMap.put(ingredientKey, ingredientName);</b>
&nbsp;         }
&nbsp;      }
&nbsp;
&nbsp;      // For each ingredient in input list, reduce its quantity by 1 if exists and quantity &gt; 0
<b class="fc">&nbsp;      for (String ingredient : ingredientsToReduce) {</b>
<b class="fc">&nbsp;         String key = ingredient.toLowerCase().trim();</b>
<b class="fc">&nbsp;         if (ingredientQuantityMap.containsKey(key)) {</b>
<b class="fc">&nbsp;            int qty = ingredientQuantityMap.get(key);</b>
<b class="fc">&nbsp;            if (qty &gt; 0) {</b>
<b class="fc">&nbsp;               ingredientQuantityMap.put(key, qty - 1);</b>
&nbsp;            }
&nbsp;         }
&nbsp;      }
&nbsp;
&nbsp;      // Now write back all ingredients and updated quantities
<b class="fc">&nbsp;      try (BufferedWriter writer = new BufferedWriter(new FileWriter(file, false))) {</b>
<b class="fc">&nbsp;         for (String key : ingredientQuantityMap.keySet()) {</b>
<b class="fc">&nbsp;            String originalName = originalNameMap.get(key);</b>
<b class="fc">&nbsp;            int updatedQty = ingredientQuantityMap.get(key);</b>
<b class="fc">&nbsp;            writer.write(originalName + &quot;,&quot; + updatedQty);</b>
<b class="fc">&nbsp;            writer.newLine();</b>
&nbsp;         }
&nbsp;      }
&nbsp;   }
&nbsp;
&nbsp;
&nbsp;   public float getCost(String mealName) {
<b class="fc">&nbsp;      float cost = 0;</b>
<b class="fc">&nbsp;      try (BufferedReader reader = new BufferedReader(new FileReader(&quot;data/menu.txt&quot;))) {</b>
&nbsp;         String line;
<b class="fc">&nbsp;         while ((line = reader.readLine()) != null) {</b>
<b class="fc">&nbsp;            String[] parts = line.split(&quot;,&quot;);</b>
&nbsp;
<b class="pc">&nbsp;            if (parts.length == 0) continue;</b>
&nbsp;
<b class="fc">&nbsp;            String name = parts[0].trim();</b>
&nbsp;
<b class="fc">&nbsp;            if (!name.equalsIgnoreCase(mealName)) {</b>
&nbsp;               continue; // skip if meal name does not match
&nbsp;            }
&nbsp;
&nbsp;            // Find the price in any part after the meal name
<b class="fc">&nbsp;            float price = -1;</b>
<b class="pc">&nbsp;            for (int i = 1; i &lt; parts.length; i++) {</b>
&nbsp;               try {
<b class="fc">&nbsp;                  price = Float.parseFloat(parts[i].trim());</b>
&nbsp;                  break; // found price, stop looking
&nbsp;               } catch (NumberFormatException e) {
&nbsp;                  // not a price, continue searching
&nbsp;               }
&nbsp;            }
&nbsp;
<b class="pc">&nbsp;            if (price &gt;= 0) {</b>
<b class="fc">&nbsp;               cost += price;</b>
&nbsp;            }
&nbsp;         }
&nbsp;      } catch (IOException e) {
<b class="nc">&nbsp;         throw new RuntimeException(e);</b>
&nbsp;      }
<b class="fc">&nbsp;      return cost;</b>
&nbsp;   }
&nbsp;
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-05-20 00:35</div>
</div>
</body>
</html>
